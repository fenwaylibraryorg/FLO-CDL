<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <?!= include('css'); ?>
    <script>
    async function GetTextbook(course) 
    {
    
    google.script.run.withSuccessHandler(function(ar) 
    {

    console.log(ar);
    
    textbook.length = 0;
    
    let option = document.createElement("option");
    option.value = "";
    option.text = "";
    textbook.appendChild(option);
    
    ar.forEach(function(item, index) 
    {    
      let option = document.createElement("option");
      option.value = item;
      option.text = item;
      textbook.appendChild(option);    
    });
    
    }).getTextbook(course);
    
    };
   
    function AcceptTerms () {
      if (document.getElementById('terms').checked) {
        document.getElementById('submitButton').disabled = false;
      } else {
        document.getElementById('submitButton').disabled = true;
      }
    };
      
  </script>  
  </head>
  <body>
    <h1>FLO CDL Demo</h1>
    <?var url = getUrl();?>
    <div id="incorrect_barcode_message" ><?= incorrect_barcode_message ?></div>    
    <form method="post" action="<?= url ?>" >
      
      <label >Name</label><br>
      <input type="text" name="name" required maxlength="50"/><br><br>
      <label required >Student ID</label><br>
      <input name="studentid" type="number" required/><br><br>

      <label  >Course</label><br>
      <select name="course" id="course" onchange="GetTextbook(this.value)" >
      <option value="" ></option>
      <? for(var i = 0; i < course.length; i++) { ?>      
      <option value="<?= course[i] ?>" ><?= course[i] ?></option>
      <? } ?>
      </select><br><br>
      <label >Textbook</label><br>
      <select name="textbook" id="textbook">
      </select><br><br>
      
      <p><strong>By checking this box I acknowledge that I have read and agree with the following:</strong> <br><br>
       
        United States Copyright law (Title 17 of the U.S. Code) governs the making of reproductions of copyrighted material.  The person using this file is liable for any infringement that may
        result from making a copy of protected material.  “Making a copy” includes, but may not be limited to: photocopying; scanning (to print, to file, or to email); printing out; copying
        downloading, or uploading a digital file; and converting analog format to digital format.<br><br>
        
        For more information, please see <a href="www.copyright.gov" target="_blank">www.copyright.gov</a>.</p><br>

      <input onclick="AcceptTerms()" type="checkbox" id="terms" name="terms" value="terms" />
      <label for="terms"> I agree</label><br><br><br>

      <input type="submit" name="submitButton" id="submitButton" value="Submit"/> 
      </br></br><div id="message" ><?= message ?></div>
      </br></br><table id="item_table"><?!= new_table ?></table>    
    </form>
  </body>
</html>
